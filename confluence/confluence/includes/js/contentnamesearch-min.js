define("confluence/contentnamesearch",["jquery","ajs","confluence/quick-nav"],function(b,e,k){return function(){var g=function(b){return function(c){b.closest("form").find(".quick-nav-drop-down").append(c)}},h=b("#quick-search-query"),f=b("#space-blog-quick-search-query"),i=b("#confluence-space-key"),l=g(h),j=e.defaultIfUndefined("Atlassian.SearchableApps.QuickNav",{defaultValue:k});j.init(h,l);j.addDropDownPostProcess(function(a){b("a",a).each(function(){var a=b(this),d=a.find("span").data("properties");
if((d=d?d.spaceName:null)&&!a.is(".content-type-spacedesc"))a.after(a.clone().attr("class","space-name").html(d)),a.parent().addClass("with-space-name")})});f.length&&i.length&&f.quicksearch("/rest/quicknav/1/search?type=blogpost&spaceKey="+e("i").html(i.attr("content")).text(),null,{dropdownPlacement:g(f)});b("#quick-search").on("click","div.quick-search-dropdown li",function(a){var c=b(this),d=b(a.target);if(!(d.is("a")&&1===d.parent().children("a").index(d))||void 0!==a.originalEvent)a=c.children("a:first").attr("class"),
c=c.index("div.quick-search-dropdown li"),e.trigger("analytics",{name:"quicknav-click-"+a,data:{index:c}})});b("#quick-search").on("submit",function(){var a={name:"quicknav-hit-enter",data:{results:b("div.quick-search-dropdown li").length}};e.trigger("analytics",a)});b("#quick-search").on({"quick-search-loading-start":function(){b(this).spin({className:"quick-search-spinner"}).addClass("quick-search-loading");b(".quick-search-spinner").css("left",b(this).outerWidth()-35+"px")},"quick-search-loading-stop":function(){b(this).spinStop().removeClass("quick-search-loading")}});
b("#quick-search").on("keydown",function(a){var c=e.dropDown.current&&-1!=e.dropDown.current.getFocusIndex();if(13===a.which&&(a.metaKey||a.ctrlKey)&&!c)a=b(this),a.attr("target","_blank"),a.submit(),a.attr("target","")})}});require("confluence/module-exporter").safeRequire("confluence/contentnamesearch",function(b){require("ajs").toInit(b)});