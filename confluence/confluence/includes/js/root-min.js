define("confluence/root",["ajs","jquery","window"],function(b,e,g){var d={getContextPath:function(){return b.Meta.get("context-path")},getBaseUrl:function(){return e("#confluence-base-url").attr("content")||""},getBuildNumber:function(){return b.Meta.get("build-number")},getContentId:function(){var a=b.Meta.get("content-id");+a||(a=b.Meta.get("page-id"));+a||(a="0");return a},getXsrfToken:function(){return b.Meta.get("atl-token")},runBinderComponents:function(){for(var a in d.Binder)if(d.Binder.hasOwnProperty(a))try{d.Binder[a]()}catch(f){b.logError("Exception in initialising of component '"+
a+"': "+f.message)}},placeFocus:function(){d.Binder.placeFocus()},unescapeEntities:function(a){var f={amp:"&",lt:"<",gt:">","#39":"'",quot:'"'};return null==a?a:(""+a).replace(/&[#\d\w]+;/g,function(a){var b=a.substring(1,a.length-1);return f[b]||a})},sessionCheck:function(a,f){var c=b.Meta.get("remote-user");if(c){var d=this.getContextPath()+b.REST.getBaseUrl()+"session/check/"+c,g=this;return e.getJSON(d).done(function(){b.debug("SESSION CHECK - OK - "+c)}).fail(function(){b.log("SESSION CHECK - FAIL - "+
c);g.sessionFail(a,f)})}},sessionFail:function(a,f){if(!a){var c=e(".aui-dialog:visible");if(c.length)a=c.find(".dialog-panel-body").empty(),c.find(".aui-button").attr("disabled","disabled");else throw Error("sessionFail method really expected a visible dialog about now :/");}f||(f=b.I18n.getText("user.session.timed.out",'<a class="reload" href="">',"</a>"),a.on("click","a.reload",function(){g.location.reload()}));b.messages.warning(a,{body:f,closeable:!1,shadowed:!0})},Binder:{placeFocus:function(){var a,
b=-1;e("input[data-focus]").each(function(){var c=e(this),d=c.attr("data-focus");d>b&&(b=d,a=c)});a&&a.focus()}},hintManager:function(a){if(!e.isArray(a))throw Error("Hints passed in must be an array of strings");var b=Math.floor(Math.random()*a.length);return{getNextHint:function(){var c=a[b];b=(b+1)%a.length;return c}}}};return d});
require("confluence/module-exporter").exportModuleAsGlobal("confluence/root","Confluence",function(b){var e=require("ajs");e.toInit(function(){b.runBinderComponents()});e.Confluence=b});