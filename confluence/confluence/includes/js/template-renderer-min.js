define("confluence/template-renderer",["jquery","ajs","confluence/meta"],function(d,b,l){function f(a){a=new String(a);a.isHtml=!0;return a}function g(a){a=a||document;d("script",a).each(function(){"text/x-template"===this.type&&(e[this.title]=f(this.text))})}function h(a){var c=e[a];c||(c=d('script[title="'+a+'"]',document),0===c.length?c=null:(e[a]=f(c[0].text),c=e[a]));return c}function i(a){return null==a?a:a.isHtml?""+a:(""+a).replace(/[&<>'"]/g,function(a){return m[a]||a})}function n(a){var c=
arguments;return a.replace(/\{(\d+)\}/g,function(a,d){var b=c[parseInt(d,10)+1];return null!=b?b:a})}function k(a,c){var j=l.get("static-resource-url-prefix");0!==a.indexOf("http")&&0!==a.indexOf(j)&&(a=j+a);d.ajax({url:a,data:{locale:b.params.userLocale},dataType:"html",success:function(a){a=b("div").append(a);g(a);c&&c()}})}var e={},m={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return{renderTemplate:function(a,c){if(!h(a))return"";d.isArray(c)||(c=Array.prototype.slice.call(arguments,
1));for(var b=[h(a).toString()],e=0;e<c.length;e++)b.push(i(c[e]));return n.apply(this,b)},loadTemplatesFromUrl:k,loadWebResourceTemplates:function(a,c,b){return k("/download/resources/"+a+"/"+c,b)},escapeEntities:i,getTemplate:h,loadTemplateScripts:g,html:f,init:function(){g()}}});
require("confluence/module-exporter").safeRequire("confluence/template-renderer",function(d){var b=require("ajs");b.renderTemplate=d.renderTemplate;b.loadTemplatesFromUrl=d.loadTemplatesFromUrl;b.loadWebResourceTemplates=d.loadWebResourceTemplates;b.escapeEntities=d.escapeEntities;b.getTemplate=d.getTemplate;b.loadTemplateScripts=d.loadTemplateScripts;b.html=d.html;b.toInit(d.init)});