define("confluence/admin-indexing",["jquery","window","confluence/api/ajax","confluence/api/constants"],function(a,j,n,k){return function(){function l(){f.prop("disabled",!0);var b=j.setInterval(function(){a.getJSON(k.CONTEXT_PATH+"/json/reindextaskprogress.action",function(a){c.progressBar(a.percentageComplete);o.text(a.count+" / "+a.total);g.show();m.html(a.compactElapsedTime);100==a.percentageComplete&&(f.prop("disabled",!1),d.show(),e.hide(),h.hide(),j.clearInterval(b))})},1E3)}var c=a("#search-index-task-progress-container"),
b=0<a("#reindex-task-in-progress").length,f=a("#build-search-index-button"),i=0<a("#search-index-exists").length,m=a("#search-index-elapsed-time"),g=a("#search-index-elapsed-time-container"),e=a("#search-index-error-status"),d=a("#search-index-success-status"),h=a("#search-index-inprogress-status"),o=a(".indexing-status");f.click(function(){n.ajax({url:k.CONTEXT_PATH+"/admin/reindex.action",type:"POST",dataType:"json",data:{},success:function(){c.progressBar(0);g.hide();l()}});return!1});(!i||""===
m.html())&&g.hide();c.progressBar(0);b&&l();i&&!b&&c.progressBar(100);b?(h.show(),e.hide(),d.hide()):(i?(d.show(),e.hide()):(e.show(),d.hide()),h.hide())}});require("confluence/module-exporter").safeRequire("confluence/admin-indexing",function(a){require("ajs").toInit(a)});