define("confluence/master",["confluence/effects","ajs","confluence/legacy","jquery"],function(a,c,e,f){var g={init:function(c){c("#messageContainer .confluence-messages").each(function(){var b=this;a.getCookie(b.id)||(c(b).show(),c(".message-close-button",b).click(function(){c(b).slideUp();a.setCookie(b.id,!0)}))})},domready1:function(){var h={};c.I18n={keys:{},get:function(b,d,j){var a=!0,i=c.contextPath()+"/rest/prototype/1/i18n",e={locale:c.params.userLocale};if(f.isArray(b)){for(var g in b)h[g]||
(a=!1);e.pluginKeys=b}else a=h[b],i+="/"+b;a?"function"===typeof d&&d(c.I18n.keys):f.ajax({url:i,data:e,dataType:"json",success:function(a){c.I18n.load(a);h[b]=!0;"function"===typeof d&&d(a)},error:function(d,a){c.log("Error loading I18n for "+b+":"+a);"function"===typeof j&&j(a)}})},load:function(b){f.extend(c.I18n.keys,b)},getText:function(b,d){var a=c.params["i18n."+b]||c.I18n.keys[b]||b;if(!d)return a;2===arguments.length&&d instanceof Array?d.unshift(a):(d=Array.prototype.slice.call(arguments,
0),d[0]=a);return c.format.apply(c,d)}}},domready2:function(){var a=/^[\s\uFEFF]+/,b=/[\s\uFEFF]+$/;/\S/.test(" ")&&(a=/^[\s\uFEFF\xA0]+/,b=/[\s\uFEFF\xA0]+$/);c.trim=c.trim||function(c){return!c?"":c.replace(a,"").replace(b,"")}}};g.General={getContextPath:e.getContextPath,getBaseUrl:e.getBaseUrl};g.selectableEffects=function(a,b,d){var e=f(this);d&&e.data("properties",d);e.click(function(d){var e=f(this);b&&b(this,e.data("properties"));a.find(".selected").removeClass("selected");e.addClass("selected");
return c.stopEvent(d)});e.hover(function(){f(this).addClass("hover")},function(){f(this).removeClass("hover")})};g.shortenUntil=function(a){for(var b=0;!a()&&b<this.length;){var c=f(this[b]).text();"…"==c?b++:f(this[b]).text(c.replace(/[^\u2026]\u2026?$/,"…"))}return this};return g});
require("confluence/module-exporter").safeRequire("confluence/master",function(a){var c=require("ajs"),e=require("jquery");c.toInit(a.init);c.General=a.General;a.domready1();a.domready2();e.fn.selectableEffects=a.selectableEffects;e.fn.shortenUntil=a.shortenUntil});