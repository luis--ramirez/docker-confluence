define("confluence/network-macro",["ajs","jquery"],function(c,b){"undefined"===typeof c.followCallbacks&&(c.followCallbacks=[]);return function(e){if(!e.attr("data-followuser-bound")){var a=e.find(".follow-user-box");a.length&&a.autocomplete(c.contextPath()+"/json/usersearch.action?filterDisabledUsers=true&query=",2,function(a){b("input[name=username]",b(a.input).parent()).val(a.username)});e.submit(function(f){var d=b("input[name=username]",b(this).parent()),g=d.val();g||(g=a.val());c.safe.post(c.contextPath()+
"/ajax/followuser.action",{username:g},function(b){var f=e.find(".follow-user-result");f.html(b);f.show();a.val("");a.focus();d.val("");c.trigger("analytics",{name:"confluence.user-profile.my.network.add"})});return c.stopEvent(f)});if(a.length){var d=c.params.followUserBoxPlaceholder;a.each(function(){a=b(this);a.data("followUserDataKey",{placeholder:d,placeholded:true})});if(b.browser.safari){a.each(function(){a=b(this);a.attr("placeholder",d)});a.val("")}else{a.val(a.data("followUserDataKey").placeholder);
a.addClass("placeholded");a.focus(function(){var a=b(this);if(a.data("followUserDataKey").placeholded){a.data("followUserDataKey").placeholded=false;a.val("");a.removeClass("placeholded")}});a.blur(function(){var a=b(this);if(a.data("followUserDataKey").placeholder&&/^\s*$/.test(a.val())){a.val(a.data("followUserDataKey").placeholder);a.data("followUserDataKey").placeholded=true;a.addClass("placeholded")}})}}}}});
require("confluence/module-exporter").safeRequire("confluence/network-macro",function(c){var b=require("jquery");require("confluence/legacy").Binder.followUser=function(){b(".follow-user").each(function(){c(b(this),{})})};b.fn.followUser=function(){b(this).each(function(){c(b(this))});return this}});